[build]
  command = "pip install -r requirements.txt"
  publish = "frontend"

[build.environment]
  PYTHON_VERSION = "3.11"
  # Exclude non-secret config vars from secrets scanning.
  # Their values appear in source as defaults (main.py, .env.example, README).
  # Actual secrets (HF_API_KEY, OPENROUTER_API_KEY) should only be set in
  # the Netlify UI and must NOT appear in repo files.
  SECRETS_SCAN_OMIT_KEYS = "DEFAULT_MODEL,KOKORO_TTS_URL,KOKORO_TTS_SPACE,KOKORO_VOICE,PYTHON_VERSION"

# Rewrite /static/* to /* so HTML refs like /static/style.css resolve correctly.
# The FastAPI backend serves frontend files under /static/, but Netlify serves
# them directly from the publish directory root.
[[redirects]]
  from = "/static/*"
  to = "/:splat"
  status = 200
